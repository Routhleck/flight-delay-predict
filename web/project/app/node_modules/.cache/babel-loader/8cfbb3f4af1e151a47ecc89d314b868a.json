{"ast":null,"code":"var _util = require(\"../core/util\");\n\nvar inherits = _util.inherits;\n\nvar Displayble = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n/**\n * Displayable for incremental rendering. It will be rendered in a separate layer\n * IncrementalDisplay have two main methods. `clearDisplayables` and `addDisplayables`\n * addDisplayables will render the added displayables incremetally.\n *\n * It use a not clearFlag to tell the painter don't clear the layer if it's the first element.\n */\n// TODO Style override ?\n\n\nfunction IncrementalDisplayble(opts) {\n  Displayble.call(this, opts);\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.notClear = true;\n}\n\nIncrementalDisplayble.prototype.incremental = true;\n\nIncrementalDisplayble.prototype.clearDisplaybles = function () {\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.dirty();\n  this.notClear = false;\n};\n\nIncrementalDisplayble.prototype.addDisplayable = function (displayable, notPersistent) {\n  if (notPersistent) {\n    this._temporaryDisplayables.push(displayable);\n  } else {\n    this._displayables.push(displayable);\n  }\n\n  this.dirty();\n};\n\nIncrementalDisplayble.prototype.addDisplayables = function (displayables, notPersistent) {\n  notPersistent = notPersistent || false;\n\n  for (var i = 0; i < displayables.length; i++) {\n    this.addDisplayable(displayables[i], notPersistent);\n  }\n};\n\nIncrementalDisplayble.prototype.eachPendingDisplayable = function (cb) {\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    cb && cb(this._displayables[i]);\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    cb && cb(this._temporaryDisplayables[i]);\n  }\n};\n\nIncrementalDisplayble.prototype.update = function () {\n  this.updateTransform();\n\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n};\n\nIncrementalDisplayble.prototype.brush = function (ctx, prevEl) {\n  // Render persistant displayables.\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === this._cursor ? null : this._displayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._cursor = i; // Render temporary displayables.\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === 0 ? null : this._temporaryDisplayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._temporaryDisplayables = [];\n  this.notClear = true;\n};\n\nvar m = [];\n\nIncrementalDisplayble.prototype.getBoundingRect = function () {\n  if (!this._rect) {\n    var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n      var childRect = displayable.getBoundingRect().clone();\n\n      if (displayable.needLocalTransform()) {\n        childRect.applyTransform(displayable.getLocalTransform(m));\n      }\n\n      rect.union(childRect);\n    }\n\n    this._rect = rect;\n  }\n\n  return this._rect;\n};\n\nIncrementalDisplayble.prototype.contain = function (x, y) {\n  var localPos = this.transformCoordToLocal(x, y);\n  var rect = this.getBoundingRect();\n\n  if (rect.contain(localPos[0], localPos[1])) {\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n\n      if (displayable.contain(x, y)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\ninherits(IncrementalDisplayble, Displayble);\nvar _default = IncrementalDisplayble;\nmodule.exports = _default;","map":{"version":3,"names":["_util","require","inherits","Displayble","BoundingRect","IncrementalDisplayble","opts","call","_displayables","_temporaryDisplayables","_cursor","notClear","prototype","incremental","clearDisplaybles","dirty","addDisplayable","displayable","notPersistent","push","addDisplayables","displayables","i","length","eachPendingDisplayable","cb","update","updateTransform","parent","brush","ctx","prevEl","beforeBrush","afterBrush","m","getBoundingRect","_rect","rect","Infinity","childRect","clone","needLocalTransform","applyTransform","getLocalTransform","union","contain","x","y","localPos","transformCoordToLocal","_default","module","exports"],"sources":["D:/Desktop/project/project/project/app/node_modules/zrender/lib/graphic/IncrementalDisplayable.js"],"sourcesContent":["var _util = require(\"../core/util\");\n\nvar inherits = _util.inherits;\n\nvar Displayble = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\n/**\n * Displayable for incremental rendering. It will be rendered in a separate layer\n * IncrementalDisplay have two main methods. `clearDisplayables` and `addDisplayables`\n * addDisplayables will render the added displayables incremetally.\n *\n * It use a not clearFlag to tell the painter don't clear the layer if it's the first element.\n */\n// TODO Style override ?\nfunction IncrementalDisplayble(opts) {\n  Displayble.call(this, opts);\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.notClear = true;\n}\n\nIncrementalDisplayble.prototype.incremental = true;\n\nIncrementalDisplayble.prototype.clearDisplaybles = function () {\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.dirty();\n  this.notClear = false;\n};\n\nIncrementalDisplayble.prototype.addDisplayable = function (displayable, notPersistent) {\n  if (notPersistent) {\n    this._temporaryDisplayables.push(displayable);\n  } else {\n    this._displayables.push(displayable);\n  }\n\n  this.dirty();\n};\n\nIncrementalDisplayble.prototype.addDisplayables = function (displayables, notPersistent) {\n  notPersistent = notPersistent || false;\n\n  for (var i = 0; i < displayables.length; i++) {\n    this.addDisplayable(displayables[i], notPersistent);\n  }\n};\n\nIncrementalDisplayble.prototype.eachPendingDisplayable = function (cb) {\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    cb && cb(this._displayables[i]);\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    cb && cb(this._temporaryDisplayables[i]);\n  }\n};\n\nIncrementalDisplayble.prototype.update = function () {\n  this.updateTransform();\n\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n};\n\nIncrementalDisplayble.prototype.brush = function (ctx, prevEl) {\n  // Render persistant displayables.\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === this._cursor ? null : this._displayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._cursor = i; // Render temporary displayables.\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === 0 ? null : this._temporaryDisplayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._temporaryDisplayables = [];\n  this.notClear = true;\n};\n\nvar m = [];\n\nIncrementalDisplayble.prototype.getBoundingRect = function () {\n  if (!this._rect) {\n    var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n      var childRect = displayable.getBoundingRect().clone();\n\n      if (displayable.needLocalTransform()) {\n        childRect.applyTransform(displayable.getLocalTransform(m));\n      }\n\n      rect.union(childRect);\n    }\n\n    this._rect = rect;\n  }\n\n  return this._rect;\n};\n\nIncrementalDisplayble.prototype.contain = function (x, y) {\n  var localPos = this.transformCoordToLocal(x, y);\n  var rect = this.getBoundingRect();\n\n  if (rect.contain(localPos[0], localPos[1])) {\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n\n      if (displayable.contain(x, y)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\ninherits(IncrementalDisplayble, Displayble);\nvar _default = IncrementalDisplayble;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}