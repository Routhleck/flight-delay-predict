{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar throttle = require(\"../../util/throttle\");\n\nvar DataZoomView = require(\"./DataZoomView\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar layout = require(\"../../util/layout\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar Rect = graphic.Rect;\nvar linearMap = numberUtil.linearMap;\nvar asc = numberUtil.asc;\nvar bind = zrUtil.bind;\nvar each = zrUtil.each; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar SliderZoomView = DataZoomView.extend({\n  type: 'dataZoom.slider',\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {Object}\n     */\n    this._displayables = {};\n    /**\n     * @private\n     * @type {string}\n     */\n\n    this._orient;\n    /**\n     * [0, 100]\n     * @private\n     */\n\n    this._range;\n    /**\n     * [coord of the first handle, coord of the second handle]\n     * @private\n     */\n\n    this._handleEnds;\n    /**\n     * [length, thick]\n     * @private\n     * @type {Array.<number>}\n     */\n\n    this._size;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this._handleWidth;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this._handleHeight;\n    /**\n     * @private\n     */\n\n    this._location;\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._dataShadowInfo;\n    this.api = api;\n  },\n\n  /**\n   * @override\n   */\n  render: function (dataZoomModel, ecModel, api, payload) {\n    SliderZoomView.superApply(this, 'render', arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', this.dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.get('orient');\n\n    if (this.dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    SliderZoomView.superApply(this, 'remove', arguments);\n    throttle.clear(this, '_dispatchZoomAction');\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    SliderZoomView.superApply(this, 'dispose', arguments);\n    throttle.clear(this, '_dispatchZoomAction');\n  },\n  _buildView: function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.barGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  },\n\n  /**\n   * @private\n   */\n  _resetLocation: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      // vertical\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    zrUtil.each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize, dataZoomModel.padding);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  },\n\n  /**\n   * @private\n   */\n  _positionGroup: function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var barGroup = this._displayables.barGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    barGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scale: otherAxisInverse ? [1, 1] : [1, -1]\n    } : orient === HORIZONTAL && inverse ? {\n      scale: otherAxisInverse ? [-1, 1] : [-1, -1]\n    } : orient === VERTICAL && !inverse ? {\n      scale: otherAxisInverse ? [1, -1] : [1, 1],\n      rotation: Math.PI / 2 // Dont use Math.PI, considering shadow direction.\n\n    } : {\n      scale: otherAxisInverse ? [-1, -1] : [-1, 1],\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([barGroup]);\n    thisGroup.attr('position', [location.x - rect.x, location.y - rect.y]);\n  },\n\n  /**\n   * @private\n   */\n  _getViewExtent: function () {\n    return [0, this._size[0]];\n  },\n  _renderBackground: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.barGroup;\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    barGroup.add(new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: zrUtil.bind(this._onClickPanelClick, this)\n    }));\n  },\n  _renderDataShadow: function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel; // var dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n    this._displayables.barGroup.add(new graphic.Polygon({\n      shape: {\n        points: areaPoints\n      },\n      style: zrUtil.defaults({\n        fill: dataZoomModel.get('dataBackgroundColor')\n      }, dataZoomModel.getModel('dataBackground.areaStyle').getAreaStyle()),\n      silent: true,\n      z2: -20\n    }));\n\n    this._displayables.barGroup.add(new graphic.Polyline({\n      shape: {\n        points: linePoints\n      },\n      style: dataZoomModel.getModel('dataBackground.lineStyle').getLineStyle(),\n      silent: true,\n      z2: -19\n    }));\n  },\n  _prepareDataShadowInfo: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (dimNames, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(dimNames.name, axisIndex).getTargetSeriesModels();\n      zrUtil.each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && zrUtil.indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(dimNames.axis, axisIndex).axis;\n        var otherDim = getOtherDim(dimNames.name);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: dimNames.name,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  },\n  _renderHandle: function () {\n    var displaybles = this._displayables;\n    var handles = displaybles.handles = [];\n    var handleLabels = displaybles.handleLabels = [];\n    var barGroup = this._displayables.barGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    barGroup.add(displaybles.filler = new Rect({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false),\n      style: {\n        fill: dataZoomModel.get('fillerColor'),\n        textPosition: 'inside'\n      }\n    })); // Frame border.\n\n    barGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    }));\n    each([0, 1], function (handleIndex) {\n      var path = graphic.createIcon(dataZoomModel.get('handleIcon'), {\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false)\n      }, {\n        x: -1,\n        y: 0,\n        width: 2,\n        height: 2\n      });\n      var bRect = path.getBoundingRect();\n      this._handleHeight = numberUtil.parsePercent(dataZoomModel.get('handleSize'), this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      var handleColor = dataZoomModel.get('handleColor'); // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      barGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.textStyleModel;\n      this.group.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: {\n          x: 0,\n          y: 0,\n          text: '',\n          textVerticalAlign: 'middle',\n          textAlign: 'center',\n          textFill: textStyleModel.getTextColor(),\n          textFont: textStyleModel.getFont()\n        },\n        z2: 10\n      }));\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} delta\n   * @return {boolean} changed\n   */\n  _updateInterval: function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scale: [handleHeight / 2, handleHeight / 2],\n        position: [handleEnds[handleIndex], size[1] / 2 - handleHeight / 2]\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n\n    this._updateDataInfo(nonRealtime);\n  },\n\n  /**\n   * @private\n   */\n  _updateDataInfo: function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        textVerticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        textAlign: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _formatLabel: function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel(Math.round(value)) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return zrUtil.isFunction(labelFormatter) ? labelFormatter(value, valueStr) : zrUtil.isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  },\n\n  /**\n   * @private\n   * @param {boolean} showOrHide true: show, false: hide\n   */\n  _showDataInfo: function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var handleLabels = this._displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide);\n  },\n  _onDragMove: function (handleIndex, dx, dy, event) {\n    this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n    eventTool.stop(event.event); // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.barGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n\n\n    changed && realtime && this._dispatchZoomAction();\n  },\n  _onDragEnd: function () {\n    this._dragging = false;\n\n    this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n\n\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction();\n  },\n  _onClickPanelClick: function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.barGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    var changed = this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    changed && this._dispatchZoomAction();\n  },\n\n  /**\n   * This action will be throttled.\n   * @private\n   */\n  _dispatchZoomAction: function () {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      start: range[0],\n      end: range[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _findCoordRect: function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    each(this.getTargetCoordInfo(), function (coordInfoList) {\n      if (!rect && coordInfoList.length) {\n        var coordSys = coordInfoList[0].model.coordinateSystem;\n        rect = coordSys.getRect && coordSys.getRect();\n      }\n    });\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  }\n});\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = SliderZoomView;\nmodule.exports = _default;","map":{"version":3,"names":["zrUtil","require","eventTool","graphic","throttle","DataZoomView","numberUtil","layout","sliderMove","Rect","linearMap","asc","bind","each","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","SliderZoomView","extend","type","init","ecModel","api","_displayables","_orient","_range","_handleEnds","_size","_handleWidth","_handleHeight","_location","_dragging","_dataShadowInfo","render","dataZoomModel","payload","superApply","arguments","createOrUpdate","get","group","removeAll","from","uid","_buildView","_updateView","remove","clear","dispose","thisGroup","_resetLocation","_resetInterval","barGroup","Group","_renderBackground","_renderHandle","_renderDataShadow","add","_positionGroup","coordRect","_findCoordRect","ecSize","width","getWidth","height","getHeight","positionInfo","right","x","top","y","layoutParams","getLayoutParams","option","name","layoutRect","getLayoutRect","padding","reverse","location","orient","targetAxisModel","getFirstTargetAxisModel","inverse","otherAxisInverse","attr","scale","rotation","Math","PI","rect","getBoundingRect","_getViewExtent","size","silent","shape","style","fill","z2","onclick","_onClickPanelClick","info","_prepareDataShadowInfo","seriesModel","series","data","getRawData","otherDim","getShadowDim","otherDataExtent","getDataExtent","otherOffset","otherShadowExtent","thisShadowExtent","areaPoints","linePoints","step","count","thisCoord","stride","round","lastIsEmpty","value","index","isEmpty","isNaN","otherCoord","push","length","Polygon","points","defaults","getModel","getAreaStyle","Polyline","getLineStyle","showDataShadow","result","eachTargetAxis","dimNames","axisIndex","seriesModels","getAxisProxy","getTargetSeriesModels","indexOf","thisAxis","getComponent","axis","getOtherDim","coordSys","coordinateSystem","getOtherAxis","getData","mapDimension","thisDim","displaybles","handles","handleLabels","filler","draggable","cursor","getCursor","drift","_onDragMove","ondragstart","_showDataInfo","ondragend","_onDragEnd","onmouseover","onmouseout","textPosition","subPixelOptimize","stroke","lineWidth","handleIndex","path","createIcon","bRect","parsePercent","setStyle","getItemStyle","handleColor","textStyleModel","Text","invisible","text","textVerticalAlign","textAlign","textFill","getTextColor","textFont","getFont","range","getPercentRange","viewExtent","_updateInterval","delta","handleEnds","viewExtend","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","percentExtent","minSpan","maxSpan","lastRange","nonRealtime","handleInterval","slice","handle","handleHeight","position","setShape","_updateDataInfo","labelTexts","axisProxy","getAxisModel","dataInterval","calculateDataWindow","start","end","valueWindow","getDataValueWindow","_formatLabel","orderedHandleEnds","setLabel","call","barTransform","getTransform","parent","direction","transformDirection","offset","textPoint","applyTransform","labelFormatter","labelPrecision","getPixelPrecision","valueStr","getLabel","toFixed","min","isFunction","isString","replace","showOrHide","dx","dy","event","stop","getLocalTransform","vertex","changed","realtime","_dispatchZoomAction","e","localPoint","transformCoordToLocal","offsetX","offsetY","center","dispatchAction","dataZoomId","id","getTargetCoordInfo","coordInfoList","model","getRect","map","radius","angle","_default","module","exports"],"sources":["F:/Wechatfile/WeChat Files/wxid_cre715h75uat22/FileStorage/MsgAttach/843d799c0bb5fd5ab828b2371b6d88b0/File/2022-07/project/project/app/node_modules/echarts/lib/component/dataZoom/SliderZoomView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar throttle = require(\"../../util/throttle\");\n\nvar DataZoomView = require(\"./DataZoomView\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar layout = require(\"../../util/layout\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar Rect = graphic.Rect;\nvar linearMap = numberUtil.linearMap;\nvar asc = numberUtil.asc;\nvar bind = zrUtil.bind;\nvar each = zrUtil.each; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar SliderZoomView = DataZoomView.extend({\n  type: 'dataZoom.slider',\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {Object}\n     */\n    this._displayables = {};\n    /**\n     * @private\n     * @type {string}\n     */\n\n    this._orient;\n    /**\n     * [0, 100]\n     * @private\n     */\n\n    this._range;\n    /**\n     * [coord of the first handle, coord of the second handle]\n     * @private\n     */\n\n    this._handleEnds;\n    /**\n     * [length, thick]\n     * @private\n     * @type {Array.<number>}\n     */\n\n    this._size;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this._handleWidth;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this._handleHeight;\n    /**\n     * @private\n     */\n\n    this._location;\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._dataShadowInfo;\n    this.api = api;\n  },\n\n  /**\n   * @override\n   */\n  render: function (dataZoomModel, ecModel, api, payload) {\n    SliderZoomView.superApply(this, 'render', arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', this.dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.get('orient');\n\n    if (this.dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    SliderZoomView.superApply(this, 'remove', arguments);\n    throttle.clear(this, '_dispatchZoomAction');\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    SliderZoomView.superApply(this, 'dispose', arguments);\n    throttle.clear(this, '_dispatchZoomAction');\n  },\n  _buildView: function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.barGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  },\n\n  /**\n   * @private\n   */\n  _resetLocation: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      // vertical\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    zrUtil.each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize, dataZoomModel.padding);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  },\n\n  /**\n   * @private\n   */\n  _positionGroup: function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var barGroup = this._displayables.barGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    barGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scale: otherAxisInverse ? [1, 1] : [1, -1]\n    } : orient === HORIZONTAL && inverse ? {\n      scale: otherAxisInverse ? [-1, 1] : [-1, -1]\n    } : orient === VERTICAL && !inverse ? {\n      scale: otherAxisInverse ? [1, -1] : [1, 1],\n      rotation: Math.PI / 2 // Dont use Math.PI, considering shadow direction.\n\n    } : {\n      scale: otherAxisInverse ? [-1, -1] : [-1, 1],\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([barGroup]);\n    thisGroup.attr('position', [location.x - rect.x, location.y - rect.y]);\n  },\n\n  /**\n   * @private\n   */\n  _getViewExtent: function () {\n    return [0, this._size[0]];\n  },\n  _renderBackground: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.barGroup;\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    barGroup.add(new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: zrUtil.bind(this._onClickPanelClick, this)\n    }));\n  },\n  _renderDataShadow: function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel; // var dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n    this._displayables.barGroup.add(new graphic.Polygon({\n      shape: {\n        points: areaPoints\n      },\n      style: zrUtil.defaults({\n        fill: dataZoomModel.get('dataBackgroundColor')\n      }, dataZoomModel.getModel('dataBackground.areaStyle').getAreaStyle()),\n      silent: true,\n      z2: -20\n    }));\n\n    this._displayables.barGroup.add(new graphic.Polyline({\n      shape: {\n        points: linePoints\n      },\n      style: dataZoomModel.getModel('dataBackground.lineStyle').getLineStyle(),\n      silent: true,\n      z2: -19\n    }));\n  },\n  _prepareDataShadowInfo: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (dimNames, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(dimNames.name, axisIndex).getTargetSeriesModels();\n      zrUtil.each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && zrUtil.indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(dimNames.axis, axisIndex).axis;\n        var otherDim = getOtherDim(dimNames.name);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: dimNames.name,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  },\n  _renderHandle: function () {\n    var displaybles = this._displayables;\n    var handles = displaybles.handles = [];\n    var handleLabels = displaybles.handleLabels = [];\n    var barGroup = this._displayables.barGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    barGroup.add(displaybles.filler = new Rect({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false),\n      style: {\n        fill: dataZoomModel.get('fillerColor'),\n        textPosition: 'inside'\n      }\n    })); // Frame border.\n\n    barGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    }));\n    each([0, 1], function (handleIndex) {\n      var path = graphic.createIcon(dataZoomModel.get('handleIcon'), {\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false)\n      }, {\n        x: -1,\n        y: 0,\n        width: 2,\n        height: 2\n      });\n      var bRect = path.getBoundingRect();\n      this._handleHeight = numberUtil.parsePercent(dataZoomModel.get('handleSize'), this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      var handleColor = dataZoomModel.get('handleColor'); // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      barGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.textStyleModel;\n      this.group.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: {\n          x: 0,\n          y: 0,\n          text: '',\n          textVerticalAlign: 'middle',\n          textAlign: 'center',\n          textFill: textStyleModel.getTextColor(),\n          textFont: textStyleModel.getFont()\n        },\n        z2: 10\n      }));\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} delta\n   * @return {boolean} changed\n   */\n  _updateInterval: function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scale: [handleHeight / 2, handleHeight / 2],\n        position: [handleEnds[handleIndex], size[1] / 2 - handleHeight / 2]\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n\n    this._updateDataInfo(nonRealtime);\n  },\n\n  /**\n   * @private\n   */\n  _updateDataInfo: function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        textVerticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        textAlign: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _formatLabel: function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel(Math.round(value)) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return zrUtil.isFunction(labelFormatter) ? labelFormatter(value, valueStr) : zrUtil.isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  },\n\n  /**\n   * @private\n   * @param {boolean} showOrHide true: show, false: hide\n   */\n  _showDataInfo: function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var handleLabels = this._displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide);\n  },\n  _onDragMove: function (handleIndex, dx, dy, event) {\n    this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n    eventTool.stop(event.event); // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.barGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n\n\n    changed && realtime && this._dispatchZoomAction();\n  },\n  _onDragEnd: function () {\n    this._dragging = false;\n\n    this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n\n\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction();\n  },\n  _onClickPanelClick: function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.barGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    var changed = this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    changed && this._dispatchZoomAction();\n  },\n\n  /**\n   * This action will be throttled.\n   * @private\n   */\n  _dispatchZoomAction: function () {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      start: range[0],\n      end: range[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _findCoordRect: function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    each(this.getTargetCoordInfo(), function (coordInfoList) {\n      if (!rect && coordInfoList.length) {\n        var coordSys = coordInfoList[0].model.coordinateSystem;\n        rect = coordSys.getRect && coordSys.getRect();\n      }\n    });\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  }\n});\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = SliderZoomView;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}