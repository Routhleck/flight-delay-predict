{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// (24*60*60*1000)\n\n\nvar PROXIMATE_ONE_DAY = 86400000;\n/**\n * Calendar\n *\n * @constructor\n *\n * @param {Object} calendarModel calendarModel\n * @param {Object} ecModel       ecModel\n * @param {Object} api           api\n */\n\nfunction Calendar(calendarModel, ecModel, api) {\n  this._model = calendarModel;\n}\n\nCalendar.prototype = {\n  constructor: Calendar,\n  type: 'calendar',\n  dimensions: ['time', 'value'],\n  // Required in createListFromData\n  getDimensionsInfo: function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  },\n  getRangeInfo: function () {\n    return this._rangeInfo;\n  },\n  getModel: function () {\n    return this._model;\n  },\n  getRect: function () {\n    return this._rect;\n  },\n  getCellWidth: function () {\n    return this._sw;\n  },\n  getCellHeight: function () {\n    return this._sh;\n  },\n  getOrient: function () {\n    return this._orient;\n  },\n\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n  getFirstDayOfWeek: function () {\n    return this._firstDayOfWeek;\n  },\n\n  /**\n   * get date info\n   *\n   * @param  {string|number} date date\n   * @return {Object}\n   * {\n   *      y: string, local full year, eg., '1940',\n   *      m: string, local month, from '01' ot '12',\n   *      d: string, local date, from '01' to '31' (if exists),\n   *      day: It is not date.getDay(). It is the location of the cell in a week, from 0 to 6,\n   *      time: timestamp,\n   *      formatedDate: string, yyyy-MM-dd,\n   *      date: original date object.\n   * }\n   */\n  getDateInfo: function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    m = m < 10 ? '0' + m : m;\n    var d = date.getDate();\n    d = d < 10 ? '0' + d : d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y,\n      m: m,\n      d: d,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + m + '-' + d,\n      date: date\n    };\n  },\n  getNextNDay: function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  },\n  update: function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.get('cellSize').slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    }\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  },\n\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   *\n   * @override\n   * @param  {Array|number} data data\n   * @param  {boolean} [clamp=true] out of range\n   * @return {Array} point\n   */\n  dataToPoint: function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  },\n\n  /**\n   * Convert a (x, y) point to time data\n   *\n   * @override\n   * @param  {string} point point\n   * @return {string}       data\n   */\n  pointToData: function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  },\n\n  /**\n   * Convert a time date item to (x, y) four point.\n   *\n   * @param  {Array} data  date[0] is date\n   * @param  {boolean} [clamp=true]  out of range\n   * @return {Object}       point\n   */\n  dataToRect: function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  },\n\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n  pointToDate: function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  },\n\n  /**\n   * @inheritDoc\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @inheritDoc\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * initRange\n   *\n   * @private\n   * @return {Array} [start, end]\n   */\n  _initRangeOption: function () {\n    var range = this._model.get('range');\n\n    var rg = range;\n\n    if (zrUtil.isArray(rg) && rg.length === 1) {\n      rg = rg[0];\n    }\n\n    if (/^\\d{4}$/.test(rg)) {\n      range = [rg + '-01-01', rg + '-12-31'];\n    }\n\n    if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rg)) {\n      var start = this.getDateInfo(rg);\n      var firstDay = start.date;\n      firstDay.setMonth(firstDay.getMonth() + 1);\n      var end = this.getNextNDay(firstDay, -1);\n      range = [start.formatedDate, end.formatedDate];\n    }\n\n    if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rg)) {\n      range = [rg, rg];\n    }\n\n    var tmp = this._getRangeInfo(range);\n\n    if (tmp.start.time > tmp.end.time) {\n      range.reverse();\n    }\n\n    return range;\n  },\n\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n  _getRangeInfo: function (range) {\n    range = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (range[0].time > range[1].time) {\n      reversed = true;\n      range.reverse();\n    }\n\n    var allDay = Math.floor(range[1].time / PROXIMATE_ONE_DAY) - Math.floor(range[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // var first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // var second = new Date(1478412000000);\n    // var allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(range[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = range[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - range[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - range[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + range[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && range.reverse();\n    return {\n      range: [range[0].formatedDate, range[1].formatedDate],\n      start: range[0],\n      end: range[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: range[0].day,\n      lweek: range[1].day\n    };\n  },\n\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n  _getDateByWeeksAndDay: function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return false;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  }\n};\nCalendar.dimensions = Calendar.prototype.dimensions;\nCalendar.getDimensionsInfo = Calendar.prototype.getDimensionsInfo;\n\nCalendar.create = function (ecModel, api) {\n  var calendarList = [];\n  ecModel.eachComponent('calendar', function (calendarModel) {\n    var calendar = new Calendar(calendarModel, ecModel, api);\n    calendarList.push(calendar);\n    calendarModel.coordinateSystem = calendar;\n  });\n  ecModel.eachSeries(function (calendarSeries) {\n    if (calendarSeries.get('coordinateSystem') === 'calendar') {\n      // Inject coordinate system\n      calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n    }\n  });\n  return calendarList;\n};\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nCoordinateSystem.register('calendar', Calendar);\nvar _default = Calendar;\nmodule.exports = _default;","map":{"version":3,"names":["zrUtil","require","layout","numberUtil","CoordinateSystem","PROXIMATE_ONE_DAY","Calendar","calendarModel","ecModel","api","_model","prototype","constructor","type","dimensions","getDimensionsInfo","name","getRangeInfo","_rangeInfo","getModel","getRect","_rect","getCellWidth","_sw","getCellHeight","_sh","getOrient","_orient","getFirstDayOfWeek","_firstDayOfWeek","getDateInfo","date","parseDate","y","getFullYear","m","getMonth","d","getDate","day","getDay","Math","abs","time","getTime","formatedDate","getNextNDay","n","Date","setDate","update","get","_lineWidth","getItemStyle","lineWidth","_getRangeInfo","_initRangeOption","weeks","whNames","cellSize","slice","layoutParams","getBoxLayoutParams","cellNumbers","each","idx","cellSizeSpecified","whGlobal","width","getWidth","height","getHeight","calendarRect","getLayoutRect","dataToPoint","data","clamp","isArray","dayInfo","range","start","end","NaN","week","nthWeek","x","pointToData","point","pointToDate","dataToRect","contentShape","center","tl","tr","br","bl","nthX","floor","nthY","_getDateByWeeksAndDay","convertToPixel","curry","doConvert","convertFromPixel","rg","length","test","firstDay","setMonth","tmp","reverse","reversed","allDay","startDateNum","endDateNum","dateNum","sign","fweek","lweek","rangeInfo","nthDay","create","calendarList","eachComponent","calendar","push","coordinateSystem","eachSeries","calendarSeries","methodName","finder","value","seriesModel","coordSys","register","_default","module","exports"],"sources":["D:/Desktop/project/project/project/app/node_modules/echarts/lib/coord/calendar/Calendar.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// (24*60*60*1000)\nvar PROXIMATE_ONE_DAY = 86400000;\n/**\n * Calendar\n *\n * @constructor\n *\n * @param {Object} calendarModel calendarModel\n * @param {Object} ecModel       ecModel\n * @param {Object} api           api\n */\n\nfunction Calendar(calendarModel, ecModel, api) {\n  this._model = calendarModel;\n}\n\nCalendar.prototype = {\n  constructor: Calendar,\n  type: 'calendar',\n  dimensions: ['time', 'value'],\n  // Required in createListFromData\n  getDimensionsInfo: function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  },\n  getRangeInfo: function () {\n    return this._rangeInfo;\n  },\n  getModel: function () {\n    return this._model;\n  },\n  getRect: function () {\n    return this._rect;\n  },\n  getCellWidth: function () {\n    return this._sw;\n  },\n  getCellHeight: function () {\n    return this._sh;\n  },\n  getOrient: function () {\n    return this._orient;\n  },\n\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n  getFirstDayOfWeek: function () {\n    return this._firstDayOfWeek;\n  },\n\n  /**\n   * get date info\n   *\n   * @param  {string|number} date date\n   * @return {Object}\n   * {\n   *      y: string, local full year, eg., '1940',\n   *      m: string, local month, from '01' ot '12',\n   *      d: string, local date, from '01' to '31' (if exists),\n   *      day: It is not date.getDay(). It is the location of the cell in a week, from 0 to 6,\n   *      time: timestamp,\n   *      formatedDate: string, yyyy-MM-dd,\n   *      date: original date object.\n   * }\n   */\n  getDateInfo: function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    m = m < 10 ? '0' + m : m;\n    var d = date.getDate();\n    d = d < 10 ? '0' + d : d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y,\n      m: m,\n      d: d,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + m + '-' + d,\n      date: date\n    };\n  },\n  getNextNDay: function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  },\n  update: function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.get('cellSize').slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    }\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  },\n\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   *\n   * @override\n   * @param  {Array|number} data data\n   * @param  {boolean} [clamp=true] out of range\n   * @return {Array} point\n   */\n  dataToPoint: function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  },\n\n  /**\n   * Convert a (x, y) point to time data\n   *\n   * @override\n   * @param  {string} point point\n   * @return {string}       data\n   */\n  pointToData: function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  },\n\n  /**\n   * Convert a time date item to (x, y) four point.\n   *\n   * @param  {Array} data  date[0] is date\n   * @param  {boolean} [clamp=true]  out of range\n   * @return {Object}       point\n   */\n  dataToRect: function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  },\n\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n  pointToDate: function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  },\n\n  /**\n   * @inheritDoc\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @inheritDoc\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * initRange\n   *\n   * @private\n   * @return {Array} [start, end]\n   */\n  _initRangeOption: function () {\n    var range = this._model.get('range');\n\n    var rg = range;\n\n    if (zrUtil.isArray(rg) && rg.length === 1) {\n      rg = rg[0];\n    }\n\n    if (/^\\d{4}$/.test(rg)) {\n      range = [rg + '-01-01', rg + '-12-31'];\n    }\n\n    if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rg)) {\n      var start = this.getDateInfo(rg);\n      var firstDay = start.date;\n      firstDay.setMonth(firstDay.getMonth() + 1);\n      var end = this.getNextNDay(firstDay, -1);\n      range = [start.formatedDate, end.formatedDate];\n    }\n\n    if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rg)) {\n      range = [rg, rg];\n    }\n\n    var tmp = this._getRangeInfo(range);\n\n    if (tmp.start.time > tmp.end.time) {\n      range.reverse();\n    }\n\n    return range;\n  },\n\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n  _getRangeInfo: function (range) {\n    range = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (range[0].time > range[1].time) {\n      reversed = true;\n      range.reverse();\n    }\n\n    var allDay = Math.floor(range[1].time / PROXIMATE_ONE_DAY) - Math.floor(range[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // var first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // var second = new Date(1478412000000);\n    // var allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(range[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = range[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - range[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - range[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + range[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && range.reverse();\n    return {\n      range: [range[0].formatedDate, range[1].formatedDate],\n      start: range[0],\n      end: range[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: range[0].day,\n      lweek: range[1].day\n    };\n  },\n\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n  _getDateByWeeksAndDay: function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return false;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  }\n};\nCalendar.dimensions = Calendar.prototype.dimensions;\nCalendar.getDimensionsInfo = Calendar.prototype.getDimensionsInfo;\n\nCalendar.create = function (ecModel, api) {\n  var calendarList = [];\n  ecModel.eachComponent('calendar', function (calendarModel) {\n    var calendar = new Calendar(calendarModel, ecModel, api);\n    calendarList.push(calendar);\n    calendarModel.coordinateSystem = calendar;\n  });\n  ecModel.eachSeries(function (calendarSeries) {\n    if (calendarSeries.get('coordinateSystem') === 'calendar') {\n      // Inject coordinate system\n      calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n    }\n  });\n  return calendarList;\n};\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nCoordinateSystem.register('calendar', Calendar);\nvar _default = Calendar;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}