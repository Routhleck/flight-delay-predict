{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../lang\");\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n\n        var dataLabels = [];\n\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '自定义图';\n  }\n}\n\nmodule.exports = _default;","map":{"version":3,"names":["zrUtil","require","lang","_dataProvider","retrieveRawValue","_default","dom","ecModel","ariaModel","getModel","get","setAttribute","seriesCnt","eachSeries","seriesModel","idx","maxDataCnt","maxSeriesCnt","displaySeriesCnt","Math","min","ariaLabel","title","getTitle","replace","getConfig","seriesLabels","prefix","seriesCount","seriesLabel","seriesName","seriesTpl","seriesId","seriesIndex","seriesType","getSeriesTypeName","subType","data","getData","window","count","displayCnt","dataLabels","i","name","getName","value","push","join","str","keyValues","result","each","key","RegExp","path","userConfig","pathArr","split","aria","length","option","text","type","series","typeNames","module","exports"],"sources":["C:/Users/XiaoAn1/Desktop/project/app/node_modules/echarts/lib/visual/aria.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../lang\");\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n\n        var dataLabels = [];\n\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '自定义图';\n  }\n}\n\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}