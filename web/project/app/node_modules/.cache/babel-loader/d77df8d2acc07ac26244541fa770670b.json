{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center' ¦ 'left' ¦ 'right' ¦ {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top' ¦ 'bottom' ¦ 'center' ¦ {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal' ¦ 'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // 值域边框颜色\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // 值域边框线宽，单位px，默认为0（无边框）\n    padding: 5,\n    // 值域内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    textGap: 10,\n    //\n    precision: 0,\n    // 小数精度，默认为0，无小数点\n    color: null,\n    //颜色（deprecated，兼容ec2，顺序同pieces，不同于inRange/outOfRange）\n    formatter: null,\n    text: null,\n    // 文本，如['高', '低']，兼容ec2，text[0]对应高值，text[1]对应低值\n    textStyle: {\n      color: '#333' // 值域文字颜色\n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    var listDimensions = list.dimensions;\n\n    if (optDim == null && !listDimensions.length) {\n      return;\n    }\n\n    if (optDim != null) {\n      return list.getDimension(optDim);\n    }\n\n    var dimNames = list.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = list.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimName;\n      }\n    }\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;","map":{"version":3,"names":["echarts","require","zrUtil","env","visualDefault","VisualMapping","visualSolution","modelUtil","numberUtil","mapVisual","eachVisual","isArray","each","asc","linearMap","noop","VisualMapModel","extendComponentModel","type","dependencies","stateList","replacableOptionKeys","dataBound","Infinity","layoutMode","ignoreSize","defaultOption","show","zlevel","z","seriesIndex","min","max","dimension","inRange","outOfRange","left","right","top","bottom","itemWidth","itemHeight","inverse","orient","backgroundColor","borderColor","contentColor","inactiveColor","borderWidth","padding","textGap","precision","color","formatter","text","textStyle","init","option","parentModel","ecModel","_dataExtent","targetVisuals","controllerVisuals","textStyleModel","itemSize","mergeDefaultAndTheme","optionUpdated","newOption","isInit","thisOption","canvasSupported","realtime","replaceVisualOption","getModel","resetItemSize","completeVisualOption","resetVisual","supplementVisualOption","bind","createVisualMappings","controller","target","getTargetSeriesIndices","optionSeriesIndex","seriesIndices","eachSeries","seriesModel","index","push","normalizeToArray","eachTargetSeries","callback","context","call","getSeriesByIndex","isTargetSeries","is","model","formatValueText","value","isCategory","edgeSymbols","isMinMax","textValue","slice","toFixed","isString","replace","isFunction","val","Math","resetExtent","extent","getDataDimension","list","optDim","listDimensions","dimensions","length","getDimension","dimNames","i","dimName","dimInfo","getDimensionInfo","isCalculationCoord","getExtent","base","merge","completeSingle","completeInactive","completeController","reverse","get","state","visualType","defa","stateExist","stateAbsent","optExist","optAbsent","visualData","isValidType","hasOwnProperty","opacity","symbolExists","symbol","symbolSizeExists","symbolSize","visuals","clone","parseFloat","categories","setSelected","getValueState","getVisualMeta","_default","module","exports"],"sources":["C:/Users/XiaoAn1/Desktop/project/app/node_modules/echarts/lib/component/visualMap/VisualMapModel.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center' ¦ 'left' ¦ 'right' ¦ {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top' ¦ 'bottom' ¦ 'center' ¦ {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal' ¦ 'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // 值域边框颜色\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // 值域边框线宽，单位px，默认为0（无边框）\n    padding: 5,\n    // 值域内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    textGap: 10,\n    //\n    precision: 0,\n    // 小数精度，默认为0，无小数点\n    color: null,\n    //颜色（deprecated，兼容ec2，顺序同pieces，不同于inRange/outOfRange）\n    formatter: null,\n    text: null,\n    // 文本，如['高', '低']，兼容ec2，text[0]对应高值，text[1]对应低值\n    textStyle: {\n      color: '#333' // 值域文字颜色\n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    var listDimensions = list.dimensions;\n\n    if (optDim == null && !listDimensions.length) {\n      return;\n    }\n\n    if (optDim != null) {\n      return list.getDimension(optDim);\n    }\n\n    var dimNames = list.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = list.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimName;\n      }\n    }\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}