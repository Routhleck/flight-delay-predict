{"ast":null,"code":"var Displayable = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar imageHelper = require(\"./helper/image\");\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\n\n\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\n\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // 图片已经加载完成\n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // 设置transform\n\n\n    this.setTransform(ctx);\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;","map":{"version":3,"names":["Displayable","require","BoundingRect","zrUtil","imageHelper","ZImage","opts","call","prototype","constructor","type","brush","ctx","prevEl","style","src","image","bind","_image","createOrUpdateImage","onload","isImageReady","x","y","width","height","aspect","setTransform","sWidth","sHeight","sx","sy","drawImage","text","restoreTransform","drawRectText","getBoundingRect","_rect","inherits","_default","module","exports"],"sources":["C:/Users/XiaoAn1/Desktop/project/app/node_modules/zrender/lib/graphic/Image.js"],"sourcesContent":["var Displayable = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar imageHelper = require(\"./helper/image\");\n\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\n\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // 图片已经加载完成\n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // 设置transform\n\n\n    this.setTransform(ctx);\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,eAAD,CAAzB;;AAEA,IAAIC,YAAY,GAAGD,OAAO,CAAC,sBAAD,CAA1B;;AAEA,IAAIE,MAAM,GAAGF,OAAO,CAAC,cAAD,CAApB;;AAEA,IAAIG,WAAW,GAAGH,OAAO,CAAC,gBAAD,CAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASI,MAAT,CAAgBC,IAAhB,EAAsB;EACpBN,WAAW,CAACO,IAAZ,CAAiB,IAAjB,EAAuBD,IAAvB;AACD;;AAEDD,MAAM,CAACG,SAAP,GAAmB;EACjBC,WAAW,EAAEJ,MADI;EAEjBK,IAAI,EAAE,OAFW;EAGjBC,KAAK,EAAE,UAAUC,GAAV,EAAeC,MAAf,EAAuB;IAC5B,IAAIC,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIC,GAAG,GAAGD,KAAK,CAACE,KAAhB,CAF4B,CAEL;;IAEvBF,KAAK,CAACG,IAAN,CAAWL,GAAX,EAAgB,IAAhB,EAAsBC,MAAtB;IACA,IAAIG,KAAK,GAAG,KAAKE,MAAL,GAAcd,WAAW,CAACe,mBAAZ,CAAgCJ,GAAhC,EAAqC,KAAKG,MAA1C,EAAkD,IAAlD,EAAwD,KAAKE,MAA7D,CAA1B;;IAEA,IAAI,CAACJ,KAAD,IAAU,CAACZ,WAAW,CAACiB,YAAZ,CAAyBL,KAAzB,CAAf,EAAgD;MAC9C;IACD,CAT2B,CAS1B;IACF;IACA;IACA;IACA;IACA;IACA;;;IAGA,IAAIM,CAAC,GAAGR,KAAK,CAACQ,CAAN,IAAW,CAAnB;IACA,IAAIC,CAAC,GAAGT,KAAK,CAACS,CAAN,IAAW,CAAnB;IACA,IAAIC,KAAK,GAAGV,KAAK,CAACU,KAAlB;IACA,IAAIC,MAAM,GAAGX,KAAK,CAACW,MAAnB;IACA,IAAIC,MAAM,GAAGV,KAAK,CAACQ,KAAN,GAAcR,KAAK,CAACS,MAAjC;;IAEA,IAAID,KAAK,IAAI,IAAT,IAAiBC,MAAM,IAAI,IAA/B,EAAqC;MACnC;MACAD,KAAK,GAAGC,MAAM,GAAGC,MAAjB;IACD,CAHD,MAGO,IAAID,MAAM,IAAI,IAAV,IAAkBD,KAAK,IAAI,IAA/B,EAAqC;MAC1CC,MAAM,GAAGD,KAAK,GAAGE,MAAjB;IACD,CAFM,MAEA,IAAIF,KAAK,IAAI,IAAT,IAAiBC,MAAM,IAAI,IAA/B,EAAqC;MAC1CD,KAAK,GAAGR,KAAK,CAACQ,KAAd;MACAC,MAAM,GAAGT,KAAK,CAACS,MAAf;IACD,CAhC2B,CAgC1B;;;IAGF,KAAKE,YAAL,CAAkBf,GAAlB;;IAEA,IAAIE,KAAK,CAACc,MAAN,IAAgBd,KAAK,CAACe,OAA1B,EAAmC;MACjC,IAAIC,EAAE,GAAGhB,KAAK,CAACgB,EAAN,IAAY,CAArB;MACA,IAAIC,EAAE,GAAGjB,KAAK,CAACiB,EAAN,IAAY,CAArB;MACAnB,GAAG,CAACoB,SAAJ,CAAchB,KAAd,EAAqBc,EAArB,EAAyBC,EAAzB,EAA6BjB,KAAK,CAACc,MAAnC,EAA2Cd,KAAK,CAACe,OAAjD,EAA0DP,CAA1D,EAA6DC,CAA7D,EAAgEC,KAAhE,EAAuEC,MAAvE;IACD,CAJD,MAIO,IAAIX,KAAK,CAACgB,EAAN,IAAYhB,KAAK,CAACiB,EAAtB,EAA0B;MAC/B,IAAID,EAAE,GAAGhB,KAAK,CAACgB,EAAf;MACA,IAAIC,EAAE,GAAGjB,KAAK,CAACiB,EAAf;MACA,IAAIH,MAAM,GAAGJ,KAAK,GAAGM,EAArB;MACA,IAAID,OAAO,GAAGJ,MAAM,GAAGM,EAAvB;MACAnB,GAAG,CAACoB,SAAJ,CAAchB,KAAd,EAAqBc,EAArB,EAAyBC,EAAzB,EAA6BH,MAA7B,EAAqCC,OAArC,EAA8CP,CAA9C,EAAiDC,CAAjD,EAAoDC,KAApD,EAA2DC,MAA3D;IACD,CANM,MAMA;MACLb,GAAG,CAACoB,SAAJ,CAAchB,KAAd,EAAqBM,CAArB,EAAwBC,CAAxB,EAA2BC,KAA3B,EAAkCC,MAAlC;IACD,CAjD2B,CAiD1B;;;IAGF,IAAIX,KAAK,CAACmB,IAAN,IAAc,IAAlB,EAAwB;MACtB;MACA,KAAKC,gBAAL,CAAsBtB,GAAtB;MACA,KAAKuB,YAAL,CAAkBvB,GAAlB,EAAuB,KAAKwB,eAAL,EAAvB;IACD;EACF,CA5DgB;EA6DjBA,eAAe,EAAE,YAAY;IAC3B,IAAItB,KAAK,GAAG,KAAKA,KAAjB;;IAEA,IAAI,CAAC,KAAKuB,KAAV,EAAiB;MACf,KAAKA,KAAL,GAAa,IAAInC,YAAJ,CAAiBY,KAAK,CAACQ,CAAN,IAAW,CAA5B,EAA+BR,KAAK,CAACS,CAAN,IAAW,CAA1C,EAA6CT,KAAK,CAACU,KAAN,IAAe,CAA5D,EAA+DV,KAAK,CAACW,MAAN,IAAgB,CAA/E,CAAb;IACD;;IAED,OAAO,KAAKY,KAAZ;EACD;AArEgB,CAAnB;AAuEAlC,MAAM,CAACmC,QAAP,CAAgBjC,MAAhB,EAAwBL,WAAxB;AACA,IAAIuC,QAAQ,GAAGlC,MAAf;AACAmC,MAAM,CAACC,OAAP,GAAiBF,QAAjB"},"metadata":{},"sourceType":"script"}